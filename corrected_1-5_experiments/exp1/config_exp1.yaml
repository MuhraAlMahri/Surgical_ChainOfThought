# Experiment 1: Random Baseline Configuration
# Minimal config for reproducing Exp1 training

model_name: Qwen/Qwen2-VL-7B-Instruct  # Updated from Qwen2-VL-7B

vision_frozen: true

lora:
  r: 16
  alpha: 32
  dropout: 0.05
  target_modules: [q_proj, k_proj, v_proj, o_proj, gate_proj, up_proj, down_proj]

train:
  seed: 42
  max_seq_len: 512
  train_bs: 4
  grad_accum: 16
  eval_bs: 4
  lr: 1.0e-4
  weight_decay: 0.0
  epochs: 1
  warmup_ratio: 0.05
  bf16: true
  gradient_checkpointing: true
  logging_steps: 10
  save_steps: 500

data:
  train_jsonl: datasets/kvasir_raw_6500_image_level_70_15_15/train.jsonl
  val_jsonl: datasets/kvasir_raw_6500_image_level_70_15_15/val.jsonl
  image_root: /l/users/muhra.almahri/Surgical_COT/datasets/Kvasir-VQA/raw/images

eval:
  numeric_rel_tol: 0.05
  numeric_abs_tol: 0.0

# ============================================================================
# ACTUAL PARAMETERS USED IN ORIGINAL TRAINING (for reference)
# ============================================================================
# The values above are minimal/simplified. Here are the actual parameters:
#
# lora:
#   r: 32                    # (was 32, not 16)
#   alpha: 64                # (was 64, not 32)
#   dropout: 0.05            # (same)
#
# train:
#   train_bs: 1              # (was 1, not 4)
#   grad_accum: 16           # (same - effective batch = 16)
#   lr: 5.0e-6               # (was 5e-6, not 1e-4)
#   epochs: 3                # (was 3, not 1)
#   warmup_ratio: 0.0        # (was 0, not 0.05)
#   gradient_checkpointing: false  # (was disabled)
#
# data:
#   train_file: corrected 1-5 experiments/datasets/kvasir_raw_6500_image_level_70_15_15/train.json
#   val_file: corrected 1-5 experiments/datasets/kvasir_raw_6500_image_level_70_15_15/val.json
#   image_root: /l/users/muhra.almahri/Surgical_COT/datasets/Kvasir-VQA/raw/images
# ============================================================================

